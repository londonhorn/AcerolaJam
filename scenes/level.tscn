[gd_scene load_steps=13 format=3 uid="uid://dirb8km766jwk"]

[ext_resource type="Script" path="res://scripts/level.gd" id="1_pdkn5"]
[ext_resource type="PackedScene" uid="uid://uhskngwc6itv" path="res://scenes/city_background.tscn" id="1_xmupy"]
[ext_resource type="PackedScene" uid="uid://d1khwm35amnmx" path="res://scenes/character_base.tscn" id="3_s2vhx"]
[ext_resource type="FontFile" uid="uid://psucj3rikhfu" path="res://assets/Fonts/SpiritsRegular-OEKo.ttf" id="4_f4dew"]
[ext_resource type="Script" path="res://scripts/Health.gd" id="4_vvxes"]
[ext_resource type="StyleBox" uid="uid://1w14wqut0rd" path="res://Themes/ButtonNormal.tres" id="5_ugkgk"]
[ext_resource type="Texture2D" uid="uid://c0vwno60s1gle" path="res://assets/sounds/UI/healthbar_back.png" id="6_abmh2"]
[ext_resource type="Texture2D" uid="uid://c2uufmfh5q1ss" path="res://assets/sounds/UI/healthbar.png" id="7_ffgls"]
[ext_resource type="Texture2D" uid="uid://b2ptycpwagstn" path="res://assets/sounds/UI/Heart.png" id="9_7r2rv"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i0i7f"]
size = Vector2(2687, 106)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i7u5b"]
size = Vector2(851, 12)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gttk0"]
size = Vector2(20, 708)

[node name="Level" type="Node2D"]
script = ExtResource("1_pdkn5")

[node name="ParallaxBackground" parent="." instance=ExtResource("1_xmupy")]

[node name="PlaceholderFloor" type="StaticBody2D" parent="."]
position = Vector2(-6, 559)
collision_layer = 2
collision_mask = 5

[node name="ColorRect" type="ColorRect" parent="PlaceholderFloor"]
offset_right = 1250.0
offset_bottom = 106.0
color = Color(0.211765, 0.207843, 0.215686, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlaceholderFloor"]
position = Vector2(1325.5, 53)
shape = SubResource("RectangleShape2D_i0i7f")

[node name="World Border" type="StaticBody2D" parent="."]
collision_layer = 16

[node name="CollisionShape2D" type="CollisionShape2D" parent="World Border"]
position = Vector2(151.5, -7)
shape = SubResource("RectangleShape2D_i7u5b")
one_way_collision_margin = 74.8

[node name="CollisionShape2D2" type="CollisionShape2D" parent="World Border"]
position = Vector2(561, 318)
shape = SubResource("RectangleShape2D_gttk0")
one_way_collision_margin = 74.8

[node name="CollisionShape2D3" type="CollisionShape2D" parent="World Border"]
position = Vector2(-10, 310)
shape = SubResource("RectangleShape2D_gttk0")
one_way_collision_margin = 74.8

[node name="WaveTotalTimer" type="Timer" parent="."]
wait_time = 10.0

[node name="SpawnTimer" type="Timer" parent="."]
wait_time = 0.1

[node name="CharacterBase" parent="." instance=ExtResource("3_s2vhx")]
position = Vector2(219, 552)

[node name="SpawnPoints" type="Node2D" parent="."]

[node name="EnemySpawn1" type="Marker2D" parent="SpawnPoints"]
position = Vector2(1194, 525)

[node name="EnemySpawn3" type="Marker2D" parent="SpawnPoints"]
position = Vector2(1427, 525)

[node name="EnemySpawn2" type="Marker2D" parent="SpawnPoints"]
position = Vector2(1305, 525)

[node name="SpawnLocation1" type="Node2D" parent="."]
position = Vector2(1305, 525)

[node name="SpawnPointsPlanes" type="Node2D" parent="."]
position = Vector2(0, -200)

[node name="EnemySpawn1" type="Marker2D" parent="SpawnPointsPlanes"]
position = Vector2(1194, 500)

[node name="EnemySpawn3" type="Marker2D" parent="SpawnPointsPlanes"]
position = Vector2(1427, 400)

[node name="EnemySpawn2" type="Marker2D" parent="SpawnPointsPlanes"]
position = Vector2(1305, 450)

[node name="SpawnPointsMissiles" type="Node2D" parent="."]
position = Vector2(0, -200)

[node name="EnemySpawn1" type="Marker2D" parent="SpawnPointsMissiles"]
position = Vector2(2500, 600)

[node name="EnemySpawn3" type="Marker2D" parent="SpawnPointsMissiles"]
position = Vector2(2500, 300)

[node name="EnemySpawn2" type="Marker2D" parent="SpawnPointsMissiles"]
position = Vector2(2500, 450)

[node name="EnemySpawn4" type="Marker2D" parent="SpawnPointsMissiles"]
position = Vector2(2500, 700)

[node name="PlayerSpawn" type="Marker2D" parent="."]
position = Vector2(219, 550)

[node name="UI" type="CanvasLayer" parent="."]

[node name="VBoxContainer" type="VBoxContainer" parent="UI"]
anchors_preset = -1
anchor_left = 0.65
anchor_top = 0.035
anchor_right = 0.65
anchor_bottom = 0.035
offset_right = 40.0
offset_bottom = 40.0

[node name="Score" type="Label" parent="UI/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("4_f4dew")
theme_override_font_sizes/font_size = 30
theme_override_styles/normal = ExtResource("5_ugkgk")
horizontal_alignment = 1

[node name="Wave" type="Label" parent="UI/VBoxContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("4_f4dew")
theme_override_font_sizes/font_size = 30
theme_override_styles/normal = ExtResource("5_ugkgk")

[node name="Health" type="TextureProgressBar" parent="UI"]
anchors_preset = -1
anchor_left = 0.815
anchor_top = 0.03
anchor_right = 0.815
anchor_bottom = 0.03
offset_right = 4.0
offset_bottom = 27.0
scale = Vector2(2, 2)
texture_under = ExtResource("6_abmh2")
texture_progress = ExtResource("7_ffgls")
script = ExtResource("4_vvxes")

[node name="HeartImage" type="Sprite2D" parent="UI/Health"]
position = Vector2(46.22, 14.78)
scale = Vector2(1.5, 1.5)
texture = ExtResource("9_7r2rv")

[node name="Marker2D" type="Marker2D" parent="."]

[connection signal="timeout" from="WaveTotalTimer" to="." method="_on_wave_total_timer_timeout"]
[connection signal="timeout" from="SpawnTimer" to="." method="_on_spawn_timer_timeout"]
[connection signal="character_died" from="CharacterBase" to="." method="_on_character_base_character_died"]
[connection signal="health_changed" from="CharacterBase" to="UI/Health" method="_on_character_base_health_changed"]
